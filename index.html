<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide: Pano_ID Integration for Tonton & REVID</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- New design and color palette inspired by the provided Tonton logo image -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Very dark background for a slick, modern feel */
            color: #e2e8f0; /* Light gray for main text on dark background */
        }
        .step-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(255, 255, 255, 0.1), 0 2px 4px -1px rgba(255, 255, 255, 0.06);
        }
        .step-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(255, 255, 255, 0.1), 0 10px 10px -5px rgba(255, 255, 255, 0.04);
        }
        .code-block {
            background-color: #1a202c; /* Slightly darker than cards for contrast */
            color: #f9fafb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #2d3748;
            color: #f9fafb;
            border: none;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: background-color 0.2s, transform 0.2s;
        }
        .copy-btn:hover {
            background-color: #4a5568;
            transform: scale(1.05);
        }
        .flow-arrow {
            color: #4a5568; /* Subtle gray for arrows */
        }
        .api-tab {
            transition: all 0.2s ease-in-out;
        }
        .active-tab {
            background-color: #00aaff; /* A vibrant blue to match the logo */
            color: #111827;
            border-radius: 0.5rem 0.5rem 0 0;
            font-weight: 600;
        }
        .api-tab:not(.active-tab) {
            background-color: #2d3748;
            color: #e2e8f0;
        }
        .process-list li {
            position: relative;
            padding-left: 2.5rem;
            margin-bottom: 1.5rem;
        }
        .process-list li::before {
            content: attr(data-step);
            position: absolute;
            left: 0;
            top: 0;
            width: 2rem;
            height: 2rem;
            background-color: #00aaff;
            color: #111827;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 700;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-6xl">

        <header class="text-center mb-12 py-12 bg-gradient-to-r from-yellow-400 via-sky-400 to-rose-500 text-white rounded-xl shadow-lg">
            <!-- Updated H1: Removed the SVG icon and set all text to white -->
            <h1 class="text-4xl md:text-5xl font-bold flex items-center justify-center">
                <span class="text-white">Tonton</span>
                <span class="text-white">&nbsp;& REVID Integration</span>
            </h1>
            <p class="mt-2 text-lg text-white">An Interactive Guide to Using Lotame's Panorama ID™</p>
        </header>

        <main>
            <section id="overview" class="mb-16 bg-gray-800 p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-gray-100 mb-4">What is a Panorama ID?</h2>
                <p class="text-gray-300 leading-relaxed">
                    The Panorama ID (`pano_id`) is a unique, privacy-first identifier from Lotame that helps connect a user's activity across different devices like mobile phones, tablets, and smart TVs. Unlike cookies, it's designed for the modern digital world, allowing for a unified view of a user without relying on third-party tracking. For the Tonton app, it provides a stable and reliable way to identify users for the REVID system.
                </p>
            </section>
            
            <section id="client-side-flow" class="mb-16">
                <h2 class="text-3xl font-bold text-center text-gray-100 mb-10">Primary Method: The Client-Side Integration Flow (In-App)</h2>
                <p class="text-gray-300 text-center max-w-2xl mx-auto mb-8">This flow is the most relevant approach for the Switch team, as it leverages your existing Mobile SDKs to obtain the `pano_id` directly within the mobile application environment for real-time personalization or targeting.</p>
                
                <div class="grid grid-cols-1 gap-8 items-start">
                    
                    <div class="step-card bg-gray-800 p-6 rounded-xl shadow-lg col-span-1">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-400 text-gray-900 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">1</div>
                            <h3 class="ml-4 text-xl font-semibold text-gray-100">Tonton App Collects MAID via SDK</h3>
                        </div>
                        <p class="text-gray-300">The process begins on the user's device. The Tonton mobile app, with the help of your Lotame SDK, obtains the Mobile Advertiser ID (MAID) which is the standard identifier for advertising purposes on iOS and Android.</p>
                        <div class="mt-4 space-y-2">
                            <div class="bg-gray-700 p-2 rounded-md font-mono text-sm text-gray-300"><strong>iOS:</strong> IDFA</div>
                            <div class="bg-gray-700 p-2 rounded-md font-mono text-sm text-gray-300"><strong>Android:</strong> GAID</div>
                        </div>
                    </div>

                    <div class="flex justify-center items-center">
                        <div class="text-4xl flow-arrow">&darr;</div>
                    </div>

                    <div class="step-card bg-gray-800 p-6 rounded-xl shadow-lg col-span-1">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-400 text-gray-900 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">2</div>
                            <h3 class="ml-4 text-xl font-semibold text-gray-100">SDK Makes an API Call</h3>
                        </div>
                        <p class="text-gray-300 mb-4">The Lotame SDK on the Tonton app automatically constructs and fires a secure API call to the Lotame server, including the MAID. By adding the <code class="bg-gray-700 text-sm p-1 rounded">rid=y</code> parameter, the response will include the Panorama ID.</p>
                        
                        <div class="mb-4">
                            <div class="flex border-b border-gray-700">
                                <button id="url-btn" class="api-tab py-2 px-4 font-medium text-sm focus:outline-none active-tab rounded-tl-xl">Request URL</button>
                                <button id="res-btn" class="api-tab py-2 px-4 font-medium text-sm focus:outline-none rounded-tr-xl">Response</button>
                            </div>
                        </div>

                        <div id="url-content">
                            <p class="text-sm text-gray-400 mb-2">The SDK will build a URL similar to this:</p>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard('inAppUrl')">Copy</button>
                                <pre id="inAppUrl"><code class="language-text">https://ad.crwdcntrl.net/5/c=&lt;your client id&gt;/e=app/mid=&lt;mobile device id&gt;/dt=&lt;idfa/gaid&gt;/pe=y/rid=y</code></pre>
                            </div>
                        </div>

                        <div id="response-content" class="hidden">
                             <p class="text-sm text-gray-400 mb-2">A successful response will include the `panoramaId`:</p>
                             <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard('inAppResponse')">Copy</button>
                                <pre id="inAppResponse"><code class="language-json">
ccaads":{
  "Profile": {
    "tpid": "c8ef27a0d4ba771a81159f0d2e792db4",
    "pid": "d99c5ba37b680159749c82487927336b",
    "panoramaId": "e480a48a23eb6b8c882401640c3456945a7020ad0470402219bcec77d43b406e",
    "Audiences": {
      ...
    }
  }
}
                    </code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-center items-center">
                        <div class="text-4xl flow-arrow">&darr;</div>
                    </div>

                     <div class="step-card bg-gray-800 p-6 rounded-xl shadow-lg col-span-1">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-400 text-gray-900 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">3</div>
                            <h3 class="ml-4 text-xl font-semibold text-gray-100">Tonton App Passes `pano_id` to REVID</h3>
                        </div>
                        <p class="text-gray-300">The Tonton app now has the `pano_id` and can pass it to any other system, such as a content management system (CMS) or ad server, for data activation. This allows for real-time personalization directly on the user's device.</p>
                        <div class="mt-4 bg-green-900 border border-green-700 p-4 rounded-lg flex items-center">
                            <span class="text-2xl mr-3">✅</span>
                            <div>
                                <p class="font-semibold text-green-300">In-App Activation Complete</p>
                                <p class="text-green-400 text-sm">REVID and other systems can now use the stable `pano_id` for user recognition within the app.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="server-side-flow" class="mb-16">
                <h2 class="text-3xl font-bold text-center text-gray-100 mb-10">Alternative: The Server-Side Integration Flow</h2>
                <p class="text-gray-300 text-center max-w-2xl mx-auto mb-8">This flow is a valid alternative if you need the Panorama ID on your backend server for purposes that don't require real-time, in-app activation, such as offline analysis or data warehousing.</p>

                <div class="grid grid-cols-1 gap-8 items-start">
                    
                    <div class="step-card bg-gray-800 p-6 rounded-xl shadow-lg col-span-1">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-400 text-gray-900 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">1</div>
                            <h3 class="ml-4 text-xl font-semibold text-gray-100">Tonton App Sends MAID to Backend</h3>
                        </div>
                        <p class="text-gray-300">The Tonton app collects the MAID and sends it to your backend server.</p>
                    </div>

                    <div class="flex justify-center items-center">
                        <div class="text-4xl flow-arrow">&darr;</div>
                    </div>

                    <div class="step-card bg-gray-800 p-6 rounded-xl shadow-lg col-span-1">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-400 text-gray-900 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">2</div>
                            <h3 class="ml-4 text-xl font-semibold text-gray-100">Tonton Backend Calls Lotame API</h3>
                        </div>
                        <p class="text-gray-300 mb-4">Tonton's backend server makes a secure <code class="bg-gray-700 text-sm p-1 rounded">POST</code> request to the Lotame Panorama ID API, sending the user's MAID. This is the core step to translate a device ID into a persistent `pano_id`. Click below to see the request structure and the expected successful response.</p>
                        
                        <div class="mb-4">
                            <div class="flex border-b border-gray-700">
                                <button id="req-btn" class="api-tab py-2 px-4 font-medium text-sm focus:outline-none active-tab rounded-tl-xl">Request</button>
                                <button id="res-btn" class="api-tab py-2 px-4 font-medium text-sm focus:outline-none rounded-tr-xl">Response</button>
                            </div>
                        </div>

                        <div id="request-content">
                            <p class="text-sm text-gray-400 mb-2"><strong>Endpoint:</strong> <code class="bg-gray-700 text-xs p-1 rounded">/server-side-panorama-id-api-for-mobile-app-maids</code></p>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard('requestCode')">Copy</button>
                                <pre id="requestCode"><code class="language-json">{
  "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "id_type": "gaid",
  "client_id": 12345,
  "consent": {
    "consent_data": "xxxxxxxxxx",
    "consent_type": "TCF_V2"
  }
}</code></pre>
                            </div>
                        </div>

                        <div id="response-content-backend" class="hidden">
                             <p class="text-sm text-gray-400 mb-2">A successful response contains the `pano_id`.</p>
                             <div class="code-block">
                                <button class="copy-btn" onclick="copyToClipboard('responseCode')">Copy</button>
                                <pre id="responseCode"><code class="language-json">{
  "pano_id": "e480a48a23eb6b8c882401640c3456945a7020ad0470402219bcec77d43b406e",
  "expires": 604800
}</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-center items-center">
                        <div class="text-4xl flow-arrow">&darr;</div>
                    </div>

                    <div class="step-card bg-gray-800 p-6 rounded-xl shadow-lg col-span-1">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-400 text-gray-900 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">3</div>
                            <h3 class="ml-4 text-xl font-semibold text-gray-100">Forward `pano_id` to REVID System</h3>
                        </div>
                        <p class="text-gray-300">Once the `pano_id` is received from Lotame, Tonton's backend system forwards this ID to the REVID system. The `pano_id` now acts as the primary, unified identifier for this user within the REVID ecosystem.</p>
                        <div class="mt-4 bg-green-900 border border-green-700 p-4 rounded-lg flex items-center">
                            <span class="text-2xl mr-3">✅</span>
                            <div>
                                <p class="font-semibold text-green-300">In-App Activation Complete</p>
                                <p class="text-green-400 text-sm">REVID and other systems can now use the stable `pano_id` for user recognition within the app.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="faq" class="mb-16 bg-gray-800 p-8 rounded-xl shadow-lg">
                <h2 class="text-3xl font-bold text-gray-100 mb-4">Additional Questions</h2>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-100 mb-2">1. Does the guide suggest multiple methods to gain Panorama ID?</h3>
                    <p class="text-gray-300">Yes, this guide suggests two primary methods. The first, and most relevant for the Switch team, is the <strong>Client-Side Integration Flow</strong>, which leverages your existing mobile SDKs. The second is the <strong>Server-Side Integration Flow</strong>, where Tonton's backend communicates directly with the Lotame API.</p>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-gray-100 mb-2">2. How can I get the pano ID API as suggested?</h3>
                    <p class="text-gray-300">The guide outlines two APIs. For the client-side method, the SDK handles a direct URL call with the <code class="bg-gray-700 text-xs p-1 rounded">rid=y</code> parameter. I have included the example above for client-side method. For the server-side method, you use a <code class="bg-gray-700 text-sm p-1 rounded">POST</code> request to the Panorama ID API.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-100 mb-2">3. Does it require an API key or any auth? Or it's publicly accessible.</h3>
                    <p class="text-gray-300">The APIs are not publicly accessible. They require authentication. The request examples in this guide explicitly show the inclusion of a <code class="bg-gray-700 text-sm p-1 rounded">client_id</code>, which serves as a form of authentication to identify your account and grant access to the API.</p>
                </div>
            </section>

            <section id="takeaways" class="mb-16">
                <h2 class="text-3xl font-bold text-center text-gray-100 mb-10">Key Takeaways</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h3 class="font-semibold text-lg text-gray-100 mb-2">MAID is the Input</h3>
                        <p class="text-gray-300 text-sm">Both methods require the user's Mobile Advertiser ID (GAID or IDFA) to generate the `pano_id`.</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h3 class="font-semibold text-lg text-gray-100 mb-2">`pano_id` is the Output</h3>
                        <p class="text-gray-300 text-sm">The `pano_id` from the API response is the definitive, persistent identifier to send to the REVID system.</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-lg shadow-lg">
                        <h3 class="font-semibold text-lg text-gray-100 mb-2">Choose Your Flow</h3>
                        <p class="text-gray-300 text-sm">Use the client-side flow for real-time in-app activation, or the server-side flow for backend systems and offline data analysis.</p>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-12 pt-8 border-t border-gray-700">
            <p class="text-sm text-gray-400">&copy; 2025 Tonton Switch Team. This guide is for internal use.</p>
        </footer>

    </div>

    <script>
        // Tab switching logic for client-side flow
        const urlBtn = document.getElementById('url-btn');
        const inAppResBtn = document.getElementById('res-btn');
        const urlContent = document.getElementById('url-content');
        const inAppResContent = document.getElementById('response-content');

        const inAppTabs = [urlBtn, inAppResBtn];
        const inAppContents = [urlContent, inAppResContent];
        
        function switchInAppTab(activeIndex) {
            inAppTabs.forEach((tab, index) => {
                if (index === activeIndex) {
                    tab.classList.add('active-tab');
                    inAppContents[index].classList.remove('hidden');
                } else {
                    tab.classList.remove('active-tab');
                    inAppContents[index].classList.add('hidden');
                }
            });
        }
        urlBtn.addEventListener('click', () => switchInAppTab(0));
        inAppResBtn.addEventListener('click', () => switchInAppTab(1));

        // Tab switching logic for server-side flow
        const reqBtn = document.getElementById('req-btn');
        const resBtn = document.getElementById('res-btn'); // Re-using old variable name, but for server side
        const reqContent = document.getElementById('request-content');
        const resContentBackend = document.getElementById('response-content-backend');

        const serverSideTabs = [reqBtn, resBtn];
        const serverSideContents = [reqContent, resContentBackend];
        
        function switchServerSideTab(activeIndex) {
            serverSideTabs.forEach((tab, index) => {
                if (index === activeIndex) {
                    tab.classList.add('active-tab');
                    serverSideContents[index].classList.remove('hidden');
                } else {
                    tab.classList.remove('active-tab');
                    serverSideContents[index].classList.add('hidden');
                }
            });
        }
        reqBtn.addEventListener('click', () => switchServerSideTab(0));
        resBtn.addEventListener('click', () => switchServerSideTab(1));

        function copyToClipboard(elementId) {
            const textToCopy = document.getElementById(elementId).innerText;
            
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                alert('Copied to clipboard!');
            } catch (err) {
                console.error('Failed to copy: ', err);
                alert('Failed to copy to clipboard.');
            } finally {
                document.body.removeChild(tempTextArea);
            }
        }
    </script>
</body>
</html>
